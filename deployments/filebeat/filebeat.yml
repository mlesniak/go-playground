logging.metrics.enabled: false
logging.level: info

filebeat.autodiscover:
  providers:
    - type: kubernetes
      templates:
        # - condition.equals:
        #     kubernetes.labels.log: "true"
        - config:
            type: container
            json.keys_under_root: true
            json.add_error_key: true
            paths:
              - /var/log/containers/*-${data.kubernetes.container.id}.log

processors:
  - drop_fields:
      fields:
        [
          "stream",
          "log",
          "input",
          "agent",
          "docker",
          "metadata",
          "ecs",
          "container",
        ]

  # From Sematext documentation
  - rename:
      fields:
        - from: host
          to: host_object
setup.template:
  enabled: false
  overwrite: false

output:
  elasticsearch:
    hosts: ["https://logsene-receiver.eu.sematext.com:443"]
    protocol: https
    index: "${SEMATEXT_TOKEN}"
